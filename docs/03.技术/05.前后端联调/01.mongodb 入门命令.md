---
title: mongodb 入门命令
date: 2021-04-21 15:58:47
permalink: /pages/3d2d01/
categories:
  - 技术
  - mongodb+Express
tags:
  - 
---
### 1.启动服务

##### 启动mongodb服务端

在mongodb的bin文件夹下执行以下命令：

```shell
mongod --dbpath D:\MongoDB\mongoDBdata
```

##### 启动客户端

启动服务端后，同样的在bin文件夹下再开一个命令窗口执行：

```shell
mongo
```

##### 运行后端代码

cd 到server文件夹：

```shell
node app
```

##### 运行前端代码

### 2.查看当前数据库

```shell
show databases 或 show dbs;
```

```shell
> show dbs;
admin   0.000GB
config  0.000GB
local   0.000GB
```

### 3.选择库

```
use databaseName
```

```shell
use test
```

### 4.查看当前库下的集合

```shell
show tables 或 show collections
```

### 5.创建库

`mongodb` 的库是隐式创建，你可以use一个不存在的库

然后在该库下创建collection，即可创建库

### 6.创建集合

```shell
db.createCollection('集合名'); 
```

collection 允许隐式创建

```shell
db.collectionName.insert(document);
```

### 7.删除整个数据库

```shell
db.dropDatabase()
```

先选择要删除的数据库，再执行删除命令：

```shell
> show dbs;
admin   0.000GB
config  0.000GB
local   0.000GB
shop    0.000GB
> use shop;
switched to db shop

> db.dropDatabase();
{ "dropped" : "shop", "ok" : 1 }
> show dbs;
admin   0.000GB
config  0.000GB
local   0.000GB
```



### 8.删除集合

```shell
db.collectionName.drop();  
```

例：

```shell
> show collections
goods
user
> db.goods.drop();
true
> show collections;
user
>     
```

### 9.查看集合数据

```shell
db.集合名.find();
```

例：

```shell
db.user.find();
{ "_id" : ObjectId("5d73077c71b815674de4d152"), "name" : "lisi", "age" : 22 }
{ "_id" : 2, "name" : "wangwu", "age" : 25 }
```

### 10.向集合中插入数据

#### 自动生成id

```shell
db.user.insert({name:'lisi',age:22})
WriteResult({ "nInserted" : 1 })
> db.user.find();
{ "_id" : ObjectId("5d73077c71b815674de4d152"), "name" : "lisi", "age" : 22 }
```

#### 指定生成id

```shell
> db.user.insert({_id:2,name:'wangwu',age:25})
WriteResult({ "nInserted" : 1 })
> db.user.find();
{ "_id" : ObjectId("5d73077c71b815674de4d152"), "name" : "lisi", "age" : 22 }
{ "_id" : 2, "name" : "wangwu", "age" : 25 }
```

#### 插入多层

```shell
> db.user.insert({_id:3,name:'xiaobing',hobby:['basketball','football'],intro:{'title':'My intro','content':'from china'}});
WriteResult({ "nInserted" : 1 })
> db.user.find();
{ "_id" : ObjectId("5d73077c71b815674de4d152"), "name" : "lisi", "age" : 22 }
{ "_id" : 2, "name" : "wangwu", "age" : 25 }
{ "_id" : 3, "name" : "xiaobing", "hobby" : [ "basketball", "football" ], "intro" : { "title" : "My intro", "content" : "from china" } }
>
```

#### `mongodb`可以不声明表，直接写入表数据即可创建成功！

```shell
> show tables;
user
> db.goods.insert({_id:1,name:'oppoR11',price:'3000'});
WriteResult({ "nInserted" : 1 })
> show tables;
goods
user
> db.goods.find()
{ "_id" : 1, "name" : "oppoR11", "price" : "3000" }
```

### 11.删除数据

> 通过mongoose创建的表名会自动增加一个 s

#### 删除指定数据

```shell
>db.user.remove({"name":"zhangshan"});
```

#### 删除所有数据

```shell
>db.user.remove({})
```

删除文档是永久性的，不能撤销，也不能恢复的。因此，在执行remove()函数前先用find()命令来查看下是否正确。

### 12.更改数据

 第一个参数表示查找到该条数据，第二个参数表示修改对应字段值

```shell
db.admin.update({name:'lisi'},{$set:{age:20}}) 
```

如果不加$set，则会将整条数据覆盖为第二个参数中的值。

### 13.查询帮助

```shell
db.help()
```

> 未完待续...