---
title: 拖拽插件
date: 2022-02-24 11:37:10
permalink: /pages/53f3d5/
categories:
  - 前端
  - 组件与插件
  - 插件
tags:
  - plugins
---
# 拖拽插件

参考教程：

* [sortable.js]( https://www.itxst.com/sortablejs/in7jjvf6.html)
* [draggable.js](https://www.itxst.com/vue-draggable/2ynnruzu.html)
* [element-UI ，Table组件实现拖拽效果](https://www.cnblogs.com/jin-zhe/p/10181852.html)

## 安装

1.引入`sortable.js`的包

 ```shell
npm install sortable.js --save
 ```

2.或者

```shell 
npm i -S vuedraggable
```

`vuedraggable`依赖` Sortable.js`，所以下载了`vuedraggable`，我们便可以直接引入`Sortable`使用`Sortable`的特性。

`vuedraggable`是`Sortable`一种加强，实现组件化的思想，可以结合`Vue`，使用起来更方便

## 使用

### sortable

引入插件：

```js
import Sortable from 'sortablejs';
```

看一个实现`el-table`拖拽的实例。

> 需要注意的是el-table务必指定row-key，row-key必须是唯一的，如ID，不然会出现排序后数据不对的情况。

```vue
<div class="contentCore-table table-common draggable">
      <el-table
        v-loading="listLoading"
        :data="tableList"
        element-loading-text="Loading"
        border
        highlight-current-row
        :row-key="(row) => row.id" 
        empty-text="暂时还没有创建品牌区"
      >
          something...
    </el-table>
</div>
```

```js
mounted(){
    this.rowDrop();
},
methods:{
     // 行拖拽
    rowDrop() {
      const tbody = document.querySelector(
        ".draggable .el-table__body-wrapper tbody" // 指定拖拽对象
      );
      const _this = this;
      Sortable.create(tbody, {
        animation: 200, // 拖拽延迟动画
        draggable: ".draggable .el-table__row", // 指定样式拖拽，这里指定table的行可拖拽
        // handle: ".icon_tuozhuai", // 指定某个元素拖拽，这里指定拖拽按钮拖拽
        onEnd({ newIndex, oldIndex }) { // 拖拽结束方法
           // 更新拖拽后的数组
          const currRow = _this.tableList.splice(oldIndex, 1)[0];
          _this.tableList.splice(newIndex, 0, currRow);
        },
      });
    },   
}
```

其它设置请参考教程。

### draggable

和`sortable`差不多，不过`draggable`使用`Draggable`组件来进行拖拽。

引入插件：

```js
import Draggable from "vuedraggable";
```

看一个拖拽的实例：

```vue
<Draggable
  v-model="groupArr"
  handle=".list_items" <!--指定可拖拽的元素--> 
  animation="300"
  >
    <transition-group>
      <div
        v-for="(ite, ind) in dataList"
        :key="ite.code"
       >
          <div class="list_items">
              something...
          </div>
      </div>
    </transition-group>
</Draggable>
```

```js
data(){
    return {
        dataList:[]
    }
},
computed:{
    // 使用计算属性更新拖拽后的数组
    groupArr: {
      get: function () {
        return this.dataList;
      },
      set: function (v) {
        this.dataList.splice(0, this.dataList.length);
        for (let ite of v) {
          this.dataList.push(ite);
        }
        return v;
      },
    },
}
```

其它设置请参考教程。
