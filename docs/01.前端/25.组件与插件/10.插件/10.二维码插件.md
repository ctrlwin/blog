---
title: 二维码插件
date: 2022-02-23 15:08:34
permalink: /pages/901264/
categories:
  - 前端
  - 组件与插件
  - 插件
tags:
  - plugins
---

# 二维码插件

官网：[node-qrcode](https://github.com/soldair/node-qrcode)

## 安装

```js
npm install --save qrcode
```

## 使用

引入插件：

```js
// main.js
import qrcode from 'qrcode'
Vue.prototype.$qrcode = qrcode
```

### 通过canvas绘制

**使用方式：**

* `toCanvas(canvasElement, text, [options], [cb(error)])`

* `toCanvas(text, [options], [cb(error, canvas)])`

将二维码绘制到canvas上，如果`canvasElement`省略则返回新的画布。

**属性：**

* `canvasElement`

  类型：`DOMElement`

  规定在哪个画布上绘制

* `text`

​		类型：`String|Array`

​		规定二维码的内容，可以是文字描述，可以是url链接等。

* `options`

  其它设置参考[选项](#选项)

* `cb`

  回调函数

**例子：**

```html
<canvas ref="qrcode"></canvas>
```

```js
onCanvas(){
    this.$qrcode.toCanvas(
        this.$refs.qrcode,
        text,
        function (err) {
            if (err) throw err;
            console.log('success!');
        }
	);
}
```

### 通过img绘制

**使用方式：**

* `toDataURL(text, [options], [cb(error, url)])`

* `toDataURL(canvasElement, text, [options], [cb(error, url)])`

将二维码绘制到canvas上，如果`canvasElement`省略则返回新的画布。

**属性：**

* `canvasElement`

  类型：`DOMElement`

  规定在哪个画布上绘制

* `text`

​		类型：`String|Array`

​		规定二维码的内容，可以是文字描述，可以是url链接等。

* `options`

  * `type`

    类型：`String`
    默认值：`image/png`

    数据 URI 格式。
    可能的值为：`image/png`, `image/jpeg`, `image/webp`。

  * `rendererOpts.quality`

    类型：`Number`
    默认值：`0.92`

    如果请求的类型是`image/jpeg`或`image/webp`，则介于`0`和之间的数字`1`指示图像质量。`

  其它设置参考[选项](#选项)

* `cb`

  回调函数

**例子：**

```html
<img ref="qrCodeImg" />
```

```js
...
options: {
    errorCorrectionLevel: "H",
    type: "image/png",
    quality: 0.3,
    margin: 1,
    color: {
        dark:"#010599FF",
    	light:"#ffffffff"
    },
},
...

onImg(){
    this.$qrcode.toDataURL(
        this.$refs.qrCodeImg,
        text,
        this.options,
        function (err) {
            if (err) throw err;
            console.log('success!');
        }
	);
}
```

## 选项

### 二维码选项

* `version`

​		类型：`Number`

​		指定二维码的版本。如不设置，将自动选择合适版本。

* `errorCorrectionLevel`

​		类型：`String`

​		默认值：`M`

​		纠错级别。
​		可能的值为`low, medium, quartile, high`或`L, M, Q, H`。

* `maskPattern`

​		类型：`Number`

​		用于屏蔽符号的屏蔽图案。
​		可能的值为`0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`。
​		如果未指定，将自动选择合适的值。

* `toSJISFunc`

​		类型：`Function`

​		辅助函数在内部用于将 kanji 转换为其 Shift JIS 值。
​		如果您需要支持汉字模式，请提供此功能。

### 渲染器选项

* `margin`

​		类型：`Number`

​		默认值：`4`

​		二维码留白边距

* `scale`

​		类型：`Number`

​		默认值：`4`

​		比例因子。值`1`表示每个模块 1px（黑点）。

* `width`

​		类型：`Number`

​		默认值：`false`

​		仅与终端渲染器相关。输出更小的二维码。

* `small`

​		类型：`Boolean`

​		强制输出图像的特定宽度。
​		如果宽度太小而无法包含 qr 符号，则此选项将被忽略。
​		优先于`scale`.

* `color.dark`

​		类型：`String`
​		默认值：`#000000ff`

​		深色模块的颜色。值必须是十六进制格式 (RGBA)。
​		注意：深色应始终比`color.light`颜色深。

* `color.light`

​		类型：`String`
​		默认值：`#ffffffff`

​		浅色模块的颜色。值必须是十六进制格式 (RGBA)。