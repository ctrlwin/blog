---
title: 使用el-select，出现切换数据后item消失的问题
date: 2021-10-20 15:12:52
permalink: /pages/b26e23/
categories:
  - 前端
  - Vue
  - 方法
tags:
  - vue
---
## 使用el-select，出现切换数据后item消失的问题

问题如下：

![下拉框图片1](/blog/images/089.png)

<!-- more -->

场景：先选择电子券类型，然后再选择电子券，并且支持添加不同类型的电子券。当我切换电子券类型时，此时会重新请求接口右边的select的列表内容会重新赋值，当select框中的内容与列表里的内容不匹配时，就会出现上图的情况，某些电子券视觉上显示为空，但select框绑定的数组内的值任然存在，并没有消失。

当我尝试各种方法，并请教了大佬后，突然发现了问题所在。

```vue
<el-select
  v-model="formData.overlayForm.couponsCodeSearch[1]"
  multiple
  filterable
  value-key="value"
  :placeholder="field.attributes[1].placeholder"
  class="choose_coupons"
  @change="overlayChange('couponsCodeSearch')"
 >
  <el-option
    v-for="(ite,ind) in selectCouponsArr"
    :key="ind"   <!-- 就是这里，这里需要绑定value，而不是数组下标ind -->
    :label="ite.label"
    :value="{ label: ite.label, value: ite.value }"
   />
    <!-- 改为绑定value↓↓ -->
   <el-option
    v-for="ite in selectCouponsArr"
    :key="ite.value"   <!-- 这里value代表的是字段的唯一code -->
    :label="ite.label"
    :value="{ label: ite.label, value: ite.value }"
   />
</el-select>
```
![下拉框图片2](/blog/images/090.png)

暂时还不知道这个问题的原因所在，等后续再补充吧。

