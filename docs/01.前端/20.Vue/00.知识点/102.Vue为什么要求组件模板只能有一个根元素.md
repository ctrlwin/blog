---
title: Vue为什么要求组件模板只能有一个根元素
date: 2021-03-24 14:21:48
permalink: /pages/12cd04/
categories:
  - 前端
  - Vue
  - 知识点
tags:
  - vue
---
> 从两方面考虑：
>
> ​	1.`new Vue({el:'#app'})`
>
> ​	2.单文件组件中，template下的元素div其实就是“树”状数据结构，肯定要有个“根”来遍历起始点。

##  1.当我们实例化Vue的时候，填写一个el选项，来指定我们的SPA入口：

```html
<body>
	<div id='app'></div>
</body>
<script>
	var vm = new Vue({
		el:'#app'
	})
</script>
```

这很好理解，就是为vue开启一个入口，那我们不妨来想想，如果我在body下这样

```html
<body>
	<div id='app1'></div>
	<div id='app2'></div>
</body>
```

Vue其实并不知道哪一个才是我们的入口，因为对于一个入口来讲，这个入口就是一个"Vue类"，Vue需要把这个入口里面的所有东西拿来渲染，处理，最后再重新插入到dom中。

如果同时设置了多个入口，那么vue就不知道哪一个才是这个‘类’。

## 2.当我们在webpack搭建的vue开发环境下，使用单文件组件时，你可能会这样：

```html
<template>
	<div class='component'></div>
</template>
```

那这里为什么template下也必须有且只能有一个div呢？

这里我们要先看一看template这个标签，这个标签是HTML5出来的新标签，它有三个特性：

> 隐藏性：该标签不会显示在页面的任何地方，即便里面有多少内容，它永远都是隐藏的状态；
> 任意性：该标签可以写在页面的任何地方，甚至是head、body、sciprt标签内；
> 无效性：该标签里的任何HTML内容都是无效的，不会起任何作用；

但是呢，你可以通过innerHTML来获取到里面的内容。

其实本质上，一个单文件组件，本质上（我认为）会被各种各样的loader处理成为.js文件（因为当你import一个单文件组件并打印出来的时候，是一个vue实例），通过template的任意性我们知道，template包裹的HTML可以写在任何地方，那么对于一个.vue来讲，这个template里面的内容就是会被vue处理为虚拟dom并渲染的内容，导致结果又回到了开始 ：既然一个.vue单文件组件是一个vue实例，那么这个实例的入口在哪里？

如果在template下有多个div，那么该如何指定这个vue实例的根入口？

为了让组件能够正常的生成一个vue实例，那么这个div会被自然的处理成程序的入口。

通过这个‘根节点’，来递归遍历整个vue‘树’下的所有节点，并处理为vdom，最后再渲染成真正的HTML，插入在正确的位置

那么这个入口，就是这个树的‘根’，各个子元素，子组件，就是这个树的‘枝叶’，而自然而然地，这棵‘树’，就是指一个vue实例了。