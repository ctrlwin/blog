---
title: clipboard 剪切板属性
date: 2022-05-26 17:02:29
permalink: /pages/189ede/
categories:
  - 前端
  - JavaScript
  - 知识点
tags:
  - js
---
# clipboard 剪切板属性
## navigator.clipboard

`navigator.clipboard`属性用于访问系统剪切板（不兼容IE）。

js另一个属性`document.execCommand()`也可以访问系统剪切板，不过即将被废弃。

部分浏览器在使用`Clipboard API`时，会弹出用户授权弹窗，如果没有授权则不允许读取或修改剪切板内容。

<!-- more -->

**常用方法：**

* readText()

  * 用于读取系统剪切板内容并返回一个promise对象

  * ```js
    var promise = navigator.clipboard.readText()
    ```

* writeText()

  * 用于想系统剪切板写入指定字符串并返回一个promise对象

  * ```js
    var promise = navigator.clipboard.writeText(text)
    ```

## 模拟复制、粘贴、剪切功能
代码实现：
```html
<div class="test-clipboard">
  <div><input type="text" id="clipboard-input" /></div>
  <button onclick="copy()">复制</button>
  <button onclick="paste()">粘贴</button>
  <button onclick="clip()">剪切</button>
</div>
```

```js
const input = document.getElementById('clipboard-input')
const clipboard = navigator.clipboard

// 判断输入框是否为空
function checkinput() {
  if (!input.value) {
    alert("请先输入内容！");
  }
  return !!input.value
}

// 复制
function copy() {
  let valid = checkinput()
  if (valid) {
    clipboard.writeText(input.value).then(() => {
      alert('复制成功！');
    })
  }
}

// 剪切
function clip() {
  let valid = checkinput()
  if (valid) {
    clipboard.writeText(input.value).then(() => {
      input.value = ""
      alert('剪切成功！');
    })
  }
}

// 粘贴
function paste() {
  clipboard.readText().then((res) => {
    input.value += res
  })
}
```
预览（如果没有效果，可点击前往codepen预览）：
<iframe height="300" style="width: 100%;" scrolling="no" title="Untitled" src="https://codepen.io/ctrlwin/embed/ZErvXpY?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/ctrlwin/pen/ZErvXpY">
  Untitled</a> by ctrlwin (<a href="https://codepen.io/ctrlwin">@ctrlwin</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>

## 参考文献

[js【剪切、复制、粘贴】功能实现](https://blog.csdn.net/huangpb123/article/details/123617309)

[MDN Clipboard API](https://developer.mozilla.org/zh-CN/docs/Web/API/Clipboard#%E6%96%B9%E6%B3%95)