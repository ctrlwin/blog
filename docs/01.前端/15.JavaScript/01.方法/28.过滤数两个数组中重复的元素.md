---
title: 过滤数两个数组中重复的元素
date: 2022-02-10 11:11:08
permalink: /pages/98bbb5/
categories:
  - 前端
  - JavaScript
  - 方法
tags:
  - js
---
# 过滤两个数组中重复的元素
## 普通元素
```js
var a = [1, 2, 3, 4, 5],
b = [ 1, 2, 3];
a.filter(i => b.indexOf(i) !== -1); // [4, 5]
```

<!-- more -->

## 对象元素
### reduce()+new Map()的方式
这里要注意一点，两个数组中的对象必须完全一样才可以检测
```js
let arr1 = [{ id: 1 }, { id: 2 }, { id: 3 }, { id: 4 }, { id: 5 }];
let arr2 = [{ id: 1 }, { id: 2 }, { id: 3 }];
let res = Object.assing(arr1); // 输出数组
const all = [...arr1, ...arr2].reduce((all, n) => {
    n = JSON.stringify(n);
    all.set(n, (all.get(n) || 0) + 1); // 标记重复的元素的数量
    return all;
}, new Map());

// 找交集
for (const dataset of all) {
    const [key, num] = dataset;
    if (num > 1) { // num大于1代表该元素有重复
        const { id } = JSON.parse(key) ?? 0;
        res.splice(res.findIndex(item => item.id === id), 1)
    }
}
console.log(res); // [{ id: 4 }, { id: 5 },]
```

### 数组循环的方式
```js
let arr3 = [{ code: 1, name: 'a' }, { code: 2, name: 'b' }, { code: 3, name: 'c' }],
    arr4 = [{ code: 1, name: 'a' }, { code: 2, name: 'b' }, { code: 3, name: 'c' }, { code: 4, name: 'f' }, { code: 5, name: 'e' }],
    newArr = deepClone(arr4);
    
arr4.map(item => {
    let val = arr3.findIndex(i => item.code === i.code)
    val !== -1 ? newArr[val]['repeat'] = true : '';
})
newArr = newArr.filter(i => !i.repeat);
console.log(newArr);  // [{ code: 4, name: 'f' }, { code: 5, name: 'e' }]
```

### 优化版
上面两种方式有个共同的问题，arr1和arr2必须完全一样才可以（数组内的对象属性一样，数组元素顺序一样），否则无法查找。

下面这种方式，即使两个数组顺序不同也可进行查找。
```js
let arr1 = [{ code: 1, name: 'a' }, { code: 3, name: 'c' }],
    arr2 = [{ code: 1, name: 'a' }, { code: 2, name: 'b' }, { code: 3, name: 'c' }];

function getArrDifSameValue(arr1, arr2) {
    var result = [];
    for (var i = 0; i < arr2.length; i++) {
        var obj = arr2[i];
        var code = obj.code;
        var isExist = false;
        for (var j = 0; j < arr1.length; j++) {
            var aj = arr1[j];
            var n = aj.code;
            if (n == code) {
                isExist = true;
                break;
            }
        }
        if (!isExist) {
            result.push(obj);
        }
    }
    return result;
}
console.log(getArrDifSameValue(arr1, arr2)); // [{ code: 2, name: 'b' }]
```

**ES6再优化版**
```js
function getArrItems(arr1, arr2) {
    let res = [];
    arr2.forEach(item => {
        let flag = arr1.find(ite => return item.code === ite.code );
        if (!flag) {
            res.push(item);
        }
    })
    return res;
}
console.log(getArrItems(arr1, arr2));
```
原文链接：[若依报错处理 # es6 filter 过滤数组](https://blog.csdn.net/xiaofanguan/article/details/88565572)

[js获取两个数组及数组对象中相同和不相同的值](https://blog.csdn.net/weixin_42333548/article/details/102588696)