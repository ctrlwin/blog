---
title: 过滤数两个数组中重复的元素
date: 2022-02-10 11:11:08
permalink: /pages/98bbb5/
categories:
  - 前端
  - JavaScript
  - 方法
tags:
  - js
---
# 过滤两个数组中重复的元素
## 普通元素
```js
var a = [1, 2, 3, 4, 5],
b = [ 1, 2, 3];
a.filter(i => b.indexOf(i) !== -1); // [4, 5]
```

## 对象元素
### reduce()+new Map()的方式
这里要注意一点，两个数组中的对象必须完全一样才可以检测
```js
let arr1 = [{ id: 1 }, { id: 2 }, { id: 3 }, { id: 4 }, { id: 5 }];
let arr2 = [{ id: 1 }, { id: 2 }, { id: 3 }];
let res = Object.assing(arr1); // 输出数组
const all = [...arr1, ...arr2].reduce((all, n) => {
    n = JSON.stringify(n);
    all.set(n, (all.get(n) || 0) + 1); // 标记重复的元素的数量
    return all;
}, new Map());

// 找交集
for (const dataset of all) {
    const [key, num] = dataset;
    if (num > 1) { // num大于1代表该元素有重复
        const { id } = JSON.parse(key) ?? 0;
        res.splice(res.findIndex(item => item.id === id), 1)
    }
}
console.log(res); // [{ id: 4 }, { id: 5 },]
```

### 数组循环的方式
```js
let arr3 = [{ code: 1, name: 'a' }, { code: 2, name: 'b' }, { code: 3, name: 'c' }],
    arr4 = [{ code: 1, name: 'a' }, { code: 2, name: 'b' }, { code: 3, name: 'c' }, { code: 4, name: 'f' }, { code: 5, name: 'e' }],
    newArr = deepClone(arr4);
    
arr4.map(item => {
    let val = arr3.findIndex(i => item.code === i.code)
    val !== -1 ? newArr[val]['repeat'] = true : '';
})
newArr = newArr.filter(i => !i.repeat);
console.log(newArr);  // [{ code: 4, name: 'f' }, { code: 5, name: 'e' }]
```
原文链接：https://blog.csdn.net/xiaofanguan/article/details/88565572